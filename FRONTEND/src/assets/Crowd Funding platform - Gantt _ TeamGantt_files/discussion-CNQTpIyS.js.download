import{R as c,j as s,b as u}from"./index-Ca0JusHs.js";import{L as l,o as m,pq as h,v as j,pr as x,ps as D,pt as g,f1 as r,ph as n,pi as C,pj as f,pk as N,pl as R,pm as _,pn as b,V as E,W as T,X as v,po as P,pp as U,pb as y,pc as I,pd as S,ij as i}from"./tasks-reducer-CEwW-C_i.js";import{c as k,N as F}from"./screen-BqmRe1Go.js";import{w as L}from"./with-location-CF_DndNw.js";import{M as O,k as M,D as w,T as q,a as W,b as A}from"./target-note-container-DmMTGfL0.js";import{I as B}from"./iframe-connector-BBUpuz7J.js";import{C as G,R as K}from"./request-progress-CF-1AjVq.js";import{m as X,E as V}from"./datadog-xw6Upz-i.js";import{W as $}from"./with-public-user-Cc0x9ogY.js";import{c6 as Q,c7 as z,c8 as H,c9 as J,c4 as Y,ca as Z}from"./index-BlqqgSTJ.js";/* empty css               */import"./input-BjF3VKzN.js";import"./use-toggle-BzBY-T5g.js";import"./smooth-height-DJpu_Esx.js";import"./question-bubble-icon-PpEk5Ap5.js";class ss extends c.Component{componentDidMount(){this.props.onFetchComments(this.props.targetId,this.props.targetType,this.props.projectIds,this.props.publicKeys)}render(){return this.props.comments===void 0||this.props.isLoadingComments?s.jsx("div",{className:"discussion-detail",children:s.jsx(l,{className:"section-body",padded:!0})}):s.jsxs("div",{className:"discussion-detail discussion-detail--compact",children:[s.jsxs("section",{className:"discussion-detail__section",children:[s.jsx("div",{className:"discussion-detail__section__heading",children:"Notes"}),s.jsx("div",{className:"message section-body task-note full",children:this.props.note?s.jsx(O,{markdown:this.props.note.model.message}):"None"})]}),s.jsxs("section",{className:"discussion-detail__section",children:[s.jsx("div",{className:"discussion-detail__section__heading",children:"Comments"})," ",s.jsx("ul",{className:"flex flex-col gap-8",children:this.props.comments.map(({model:e})=>s.jsx(M,{canEditTarget:!1,comment:e,currentUserId:-1,disableCommentReactions:!0,userDateFormat:this.props.userDateFormat},e.id))})]})]})}}const es=(t,e)=>{const o=parseInt(e.targetId)||parseInt(e.params.targetId),a=e.targetType||e.params.targetType;return{comments:x(t,{targetId:o}),isLoadingComments:t.loadingStates.targetComments,projectIds:t.currentUserData.publicUserProjectIds,publicKeys:t.currentUserData.publicKeys,targetId:o,targetType:a,userDateFormat:j(t),note:h(t,{targetId:o})}},ts=t=>({onFetchComments:(e,o,a,p)=>{t(D(e,o,a,p))}}),os=m(es,ts)(ss);class as extends c.Component{constructor(e){super(e),this.state={requestStatus:"idle"}}componentDidMount(){this.props.isPublicUser||(document.getElementById("root").style.overflow="auto")}render(){return s.jsx(B,{name:"discussion",children:({targetId:e,targetType:o})=>this.props.isPublicUser?s.jsx(os,{targetId:e,targetType:o}):s.jsxs(w,{compact:!0,shouldFetchTarget:!0,showNotFound:!0,targetId:e,targetType:o,children:[s.jsx(G,{children:s.jsx(K,{targetId:e,event:g})}),s.jsx(r,{className:"my-24"}),s.jsx(q,{disableLoader:!0,saveOnBlur:!0,targetId:e,targetType:o}),s.jsx(r,{className:"my-24"}),s.jsx(W,{targetId:e,targetType:o}),s.jsx(r,{className:"my-24"}),s.jsx(A,{className:"documents-iframe",targetId:e,targetType:o})]})})}}const rs=t=>({isPublicUser:t.currentUserData.isPublicUser}),is=L(m(rs)(as)),ns=n({navigation:R,auth:N,checklistData:Y,currentUserData:f,discussionDetailComponent:J,discussionsData:H,documentsData:z,entities:n({projects:Z,tasks:b,times:_}),loadingStates:C,projectsData:Q}),cs=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||T,d=E(ns,cs(v(P,U))),ms=k(s.jsx(i,{element:s.jsxs(s.Fragment,{children:[s.jsx(V,{}),s.jsx(F,{})]}),loader:X(d),children:s.jsx(i,{path:":dummy",element:s.jsx($,{useCache:!0}),children:s.jsx(i,{element:s.jsx(is,{}),index:!0})})})),ds=u.createRoot(document.getElementById("root"));ds.render(s.jsx(y,{store:d,children:s.jsx(I,{children:s.jsx(S,{router:ms})})}));
//# sourceMappingURL=discussion-CNQTpIyS.js.map
